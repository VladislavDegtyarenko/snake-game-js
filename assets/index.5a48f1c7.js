const P=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const u of s.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerpolicy&&(s.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?s.credentials="include":o.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}};P();var T="/snake-game-js/assets/snake.5576f49c.svg",B="/snake-game-js/assets/pre-count.aa147b9d.wav",M="/snake-game-js/assets/start.baf89467.wav",R="/snake-game-js/assets/mixkit-quick-jump-arcade-game-239.e7b804d9.wav",D="/snake-game-js/assets/mixkit-arcade-game-jump-coin-216.b4aaa99e.wav",N="/snake-game-js/assets/mixkit-arcade-retro-game-over-213.57362e99.wav",$="/snake-game-js/assets/mixkit-arcade-magic-notification-2342.e2738531.wav";let l=9,c,C=null,p=null,k=null,U={easy:400,medium:250,hard:125},y=!1,L=!1,a=null,i=null,w=null,v=!1;const z=new Audio(B),F=new Audio(M),x=new Audio(R),H=new Audio(D),A=new Audio(N),J=new Audio($);x.volume=.75;A.volume=.5;const h=document.querySelector("#app");h.setAttribute("tabIndex",1);const m=document.createElement("div");m.classList.add("playground");m.style.setProperty("--playground-size",l);const E=document.createElement("div");E.classList.add("playground__grid");for(let e=0;e<l*l;e++){const t=document.createElement("div");E.appendChild(t)}const d=document.createElement("div");d.classList.add("score");h.appendChild(m);m.appendChild(d);m.appendChild(E);const Q=()=>{const e=document.createElement("div"),t=document.createElement("div");e.classList.add("score__current"),t.classList.add("score__best"),e.textContent=0,t.textContent=`${p}: ${JSON.parse(localStorage.getItem(p))||0}`,d.appendChild(e),d.appendChild(t)},V=()=>{for(;d.firstChild;)d.removeChild(d.firstChild)},W=()=>{d.querySelector(".score__current").textContent=c.length-3},X=(e,t)=>{d.querySelector(".score__best").textContent=`${e}: ${t}`},_=()=>{const e=document.createElement("div"),t=document.createElement("img"),n=document.createElement("h1"),r=document.createElement("h3"),o=document.createElement("button"),s=document.createElement("button"),u=document.createElement("button");e.classList.add("main-screen"),t.classList.add("main-screen__logo"),n.classList.add("main-screen__title"),r.classList.add("main-screen__descr"),t.src=T,n.textContent="Snake Game",r.textContent="Choose Level",o.textContent="easy",s.textContent="medium",u.textContent="hard",e.appendChild(t),e.appendChild(n),e.appendChild(r),e.appendChild(o),e.appendChild(s),e.appendChild(u),m.appendChild(e),e.onmouseover=f=>{f.target.matches("button")&&g(x)},e.onclick=f=>{if(!f.target.matches("button"))return;const S=f.target.textContent;Z(S),e.remove(),h.focus()}},Y=()=>{const e=document.createElement("div"),t=document.createElement("button"),n=document.createElement("button"),r=document.createElement("button"),o=document.createElement("button");e.classList.add("controls"),t.textContent="\u25B2",n.textContent="\u25BC",r.textContent="\u25C0",o.textContent="\u25B6",t.style.gridColumnStart="2",r.style.gridColumnStart="1",o.style.gridColumnStart="3",n.style.gridColumnStart="2",e.appendChild(t),e.appendChild(r),e.appendChild(o),e.appendChild(n),h.appendChild(e),e.onclick=s=>{if(v||!y)return;const u=s.target===t,f=s.target===n,S=s.target===r,K=s.target===o;u&&i!=="down"&&(a="up"),f&&i!=="up"&&(a="down"),S&&i!=="right"&&(a="left"),K&&i!=="left"&&(a="right")}},Z=e=>{ee(e),ne(),G(),b(),Q(),te()},ee=e=>{k=U[e],p=e},g=e=>{e.pause(),e.currentTime=0,e.play()},te=()=>{const e=["3","2","1","GO!"],n=document.createElement("div");n.classList.add("countdown"),m.appendChild(n),n.style.setProperty("--interval",750+"ms");for(let r=0;r<e.length;r++)setTimeout(()=>{n.textContent=e[r],r<e.length-1?g(z):g(F)},750*r);setTimeout(()=>{q(),n.remove()},750*e.length)};h.onkeydown=e=>{if(v||!y)return;const t=e.key==="ArrowUp"||e.key==="w",n=e.key==="ArrowDown"||e.key==="s",r=e.key==="ArrowLeft"||e.key==="a",o=e.key==="ArrowRight"||e.key==="d",s=e.code==="Space";t&&i!=="down"&&(a="up"),n&&i!=="up"&&(a="down"),r&&i!=="right"&&(a="left"),o&&i!=="left"&&(a="right"),s&&(L?q():I())};const ne=()=>{const e=document.createElement("div");e.classList.add("snake"),m.appendChild(e),c=[[3,(l-1)/2],[2,(l-1)/2],[1,(l-1)/2]],a="down",j()},oe=()=>{let[e,t]=c[0];if(a==="up"&&e--,a==="down"&&e++,a==="left"&&t--,a==="right"&&t++,e=e<0?l-1:e,t=t<0?l-1:t,e=e>l-1?0:e,t=t>l-1?0:t,c.unshift([e,t]),se()?(G(),W(),g(H)):c.pop(),j(),i=a,v=ae(),v)return le()},j=()=>{const e=document.querySelector(".snake");for(;e.firstChild;)e.removeChild(e.firstChild);for(let t=0;t<c.length;t++){const n=document.createElement("div"),[r,o]=c[t];O(n,r,o),e.appendChild(n)}},q=()=>{L=!1,y=!0,b(),w=setInterval(oe,k)},I=()=>{L=!0,clearInterval(w),w=null,b()},re=()=>{let e=Math.floor(Math.random()*l),t=Math.floor(Math.random()*l);return[e,t]},O=(e,t,n)=>{e.style.setProperty("--top",t),e.style.setProperty("--left",n)},G=()=>{let e=document.querySelector(".food");document.querySelector(".food")===null&&(e=document.createElement("div"),e.classList.add("food"),document.querySelector(".playground").appendChild(e));do C=re();while(c.some(r=>r.join()===C.join()));let[t,n]=C;O(e,t,n)},se=()=>c[0].join()===C.join(),b=()=>{const e=document.querySelector(".snake"),t=document.querySelector(".food");e==null||e.classList.toggle("inactive"),t==null||t.classList.toggle("inactive")},ae=()=>{for(let e=1;e<c.length;e++)if(c[e].join()===c[0].join())return!0},le=()=>{I(),y=!1;const e=parseInt(document.querySelector(".score__current").textContent),t=JSON.parse(localStorage.getItem(p))||0,n=document.createElement("div");n.classList.add("game-over"),e>t?(g(J),X(p,e),localStorage.setItem(p,e),n.textContent="Best Score!"):(g(A),n.textContent="Game Over!"),document.querySelector(".playground").appendChild(n),n.onclick=()=>{document.querySelector(".snake").remove(),document.querySelector(".food").remove(),p=null,k=null,v=!1,V(),_(),n.remove()}},ce=()=>"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0;_();ce()&&Y();
