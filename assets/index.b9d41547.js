const U=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))A(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&A(l)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerpolicy&&(a.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?a.credentials="include":s.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function A(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}};U();const d=9,v={RUNNING:"is_running",PAUSED:"is_paused",GAME_OVER:"is_game_over"},E={easy:400,medium:250,hard:125},o={snakeCoordinates:[],foodPosition:[],level:null,gameStatus:null,direction:null,lastDirection:null,moveInterval:null};function Z(){o.snakeCoordinates=[],o.foodPosition=[],o.level=null,o.gameStatus=null,o.direction=null,o.lastDirection=null,o.moveInterval&&(clearInterval(o.moveInterval),o.moveInterval=null)}function i(e,{className:n,html:r,text:A,attrs:s,on:a}={}){const l=document.createElement(e);if(n){const u=Array.isArray(n)?n:[n];l.classList.add(...u)}if(r?l.innerHTML=r:A&&(l.textContent=A),s)for(const[u,q]of Object.entries(s))l.setAttribute(u,q);if(a)for(const[u,q]of Object.entries(a))l.addEventListener(u,q);return l}function C(e,n){return e[0]===n[0]&&e[1]===n[1]}function w(e,n,r){e.style.setProperty("--top",n),e.style.setProperty("--left",r)}const t={app:document.querySelector("#app"),playground:null,playgroundGrid:null,scoreContainer:null,currentScore:null,bestScore:null,snake:null,food:null,tutorialScreen:null,countdown:null,pauseOverlay:null,gameOverOverlay:null};function P(){t.playground=i("div",{className:"playground"}),t.playgroundGrid=i("div",{className:"playground__grid"}),t.scoreContainer=i("div",{className:"score"}),t.playgroundGrid.innerHTML="<div></div>".repeat(d*d),t.app.appendChild(t.playground),t.playground.appendChild(t.scoreContainer),t.playground.appendChild(t.playgroundGrid)}var T="/snake-game-js/assets/snake.5576f49c.svg";function z(){t.food||(t.food=i("div",{className:"food"}),t.playground.appendChild(t.food));do o.foodPosition=F();while(o.snakeCoordinates.some(e=>C(e,o.foodPosition)));w(t.food,...o.foodPosition)}function D(){return C(o.snakeCoordinates[0],o.foodPosition)}function F(){const e=Math.floor(Math.random()*d),n=Math.floor(Math.random()*d);return[e,n]}var G="/snake-game-js/assets/pre-count.cabb38ff.mp3",Q="/snake-game-js/assets/start.88340864.mp3",J="data:audio/mpeg;base64,//tQxAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8AAAAFAAAE5AAzMzMzMzMzMzMzMzMzMzMzMzMzM2ZmZmZmZmZmZmZmZmZmZmZmZmZmmZmZmZmZmZmZmZmZmZmZmZmZmZnMzMzMzMzMzMzMzMzMzMzMzMzMzP////////////////////////8AAAA6TEFNRTMuOTlyAaUAAAAAAAAAABRAJAQQQgAAQAAABOThWC7oAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP/7UMQAAAkkhTmUEYABkJ9t/x7QAJEnAAQgAHAzMYxjAjMYxsgMDdz06iJ9c/0REShwAAAE3dz9ERE3AABHA+oH1AgGBICAIHOCAIAN9X/+JDhc/J1g//ygIAg7/wxJhLrDIyrKwrn4WzUIxUAxuUt5xmCGlHwciFqFEPGBnu+yXECXUJIszRRLiRcGFBuElptNC6ZLUmXS+eoKQNKtFSLNQ6bLp1I09rVKZX76emr/TU1uzXNM00FEfKSk4r/0DPz61fKwl9ByjrV8engx//n/+1LEBoAL6SVsHPMAAXOLMD2UjRjeWYsEQxnMZveJ/+lJp65j3hQGKIRD0vwTBCZN9sEQ6ZAcgg9KJ6yCTxNF0h3JYzs5jvBuXf1ROFzn/ZVLKN+7DvhXuGh9XZyTzWe1qHuqU/zyOtXyKZ1SRAlJ1/Zp/ZHm+quU9jDzFpQNi40FARLGWbLvycGNcLDUOb8eHwDOAygOIciPYosXEiZJA2QIsMGa2x9oFEi2McbY/Pti5jsFIgUXua99ZMoNF2kMkNf3qqh2Q0MyOlBWExJgh//7UsQGAAvQyYHHmE6Rfwqv+PYY4hGUMQVUlOX5DjmL0bpcFG2LKzgzRJ66SghJaPYxVRWXs5kSyz0Mjp1L6+pXko//TsIEgfOxiBVN4WS0u+5lCnb2O1Xn1ypMg4HocaGTJhS3WPlJu6qHVDLpVBQMVeLAXYtpykhD0nl0QDsiASXjqXjExWmJGUZckSsjA4iKNCVkHPTLqOBdxtynnRRGtpljxVBgYeYdHpkWGRo5K0FTrK0LnWkWJW9qUFbaeqy4jay9Huoqeqqqh3ZdpVBZ//tSxASAC2ypcceYURFljel0YSbCsWIS4rq6JUrH5fmNMd6nUNVtIVnyeWCqo25I5/5qn9a8zNgqOyyW/zGM9DNp/+VlARIKhpYdEv0a9SzoNLeR4NAUNTv+Inho7DuVyp2diIf1ckpbRttu6kiUWpLTSJFqz8okcSLRZpbz+7go1golZWo/qAkYlSJiqj2cQhUBFQEWJBVykAUVFSUJEgoBRUY1EkeUvLEeE3WBrxQk9kFiRoiExUBJDUYPdkj3vmi40EjaqqiVR4ko8WedlTr/+1LECAEHrAELgIRAAO2AEYgQjbhVwKuLZIsebKqfxE8Gn4iPFXdCuCvxKd2VB3/LPLPwWeVDXKz35VwhDWWOwaHgAC8VFRX//q1ioqKiv//4qKioqypv/qFhZQuKioqKiwsLCwuwVFWeWCQsLCwMhUVFRQTCwsFhUVFRGEJMQU1FMy45OS41qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqg==",K="data:audio/mpeg;base64,//tQxAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8AAAAFAAAE5AAzMzMzMzMzMzMzMzMzMzMzMzMzM2ZmZmZmZmZmZmZmZmZmZmZmZmZmmZmZmZmZmZmZmZmZmZmZmZmZmZnMzMzMzMzMzMzMzMzMzMzMzMzMzP////////////////////////8AAAA6TEFNRTMuOTlyAaUAAAAAAAAAABRAJAUOQgAAQAAABOS7RKxOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP/7UMQAAAoYYSJ1h4ARgZhvdzLwSgAEQPWXvggkLwNARvMZzScFHQUaY9ZasynNKTONHNugAHAMyTtTI3lvLm+LedbPimsw37x5E1m/vDePKCcHz4n/Lg+c4Of////8oGC////+XAAA9iJhNksut+wAAAA24cyIq8iWV17Cl2pR6lqHAWYjhMKIkkL2HrZDvREHR15Z7U/i6XaFsnLMf2+dojE37P8ehxbY3hZCMTeA8189ubdet9nlv6j6/v+wfwnn6drncqrQSDIY04AG5Mv/+1LEBIALKNddXaaAMXqVqz2uISOkqAktiYqScpBXeGFdkD+0vNZOkCAHlmqKRl0hJg+AoiWKZRS9RPDIeFcYJz6lGReMwmwGkcZffbokiMkZZun/USRfKCDf5eQ/0jIzLjEU5VDACWCBQCTl4Am3kftSiLhQSdSHDjPQIlPu2E4aXzOqKMjCExqLN4O2qsr/P5bTfNfKOAYQz//+aB4GQjt9hwu7kKCkJBc///saKg8aKVwnxlOOP79zQN29m0w0r/P5tAU0UIhUuAD6tKXagP/7UsQGgAuor1msdWbZeJYpNZYV4quqdGVChSvVHTJRDTCdfDxRpjI4Fx4TnlfWGh6LiU9RZev4eisNxiX4CgGCXDd5rt/+W5qoqeNEGVH/9JVpHrRhNBQsk3TfA/8uDQtUjAd/VEiA22ASncJ/JVN8dJ+2Cw8ypMkIFBHZ+YAqASRXHFIl6Y8+zMUFKdWZgeDkEgPCkaDUzfpxF/9xEcZxEWDokOAMXnO3+qB4xjCxIFgGUiMdKjAVDRbSgXT//////eopxkANIABMUc/XJt/W//tSxAaACpSTO608T1GTmWh8/A2R7KdwE0KEqxAAmTFDBbTZPgE4mcIY4Wjvqwp4O8ZtF3iucSzE+E2EKJsS0xS5qNnj4///+jlAQFgoJhF8h8rBosBRVj////9gs6woAcKyG7/hrv52B5DfpgsbxsqzDtLamZrAGDMAkcbdpYkta+YGLCCHeE6X/pQMYVQwtH+Jvpvvpvz+8W0hUI7Cp04VOFRFLESxAiWInniB4gcPEDxAgeIHiZJ5J55J9azwzwoFOwgEEgpuNxMKE0qGTpP/+1LEB4PJyDMzoKWEQAAANIAAAARTLmxJKQ/ACiaMSddby4CgUYPCQUCoweM5E6dPHdp46ePNZJESREmSIkhEIkJRSVLFSpYqpS1LLFh4we7/f/tqTEFNRTMuOTkuNaqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqg==",B="/snake-game-js/assets/mixkit-arcade-retro-game-over-213.c295063f.mp3",H="/snake-game-js/assets/mixkit-arcade-magic-notification-2342.dfd78603.mp3",V="/snake-game-js/assets/pause-89443.655f99fb.mp3",j="/snake-game-js/assets/unpause-106278.422741f2.mp3";const S={preCount:new Audio(G),start:new Audio(Q),menuHover:new Audio(J),eat:new Audio(K),gameOver:new Audio(B),bestScore:new Audio(H),pause:new Audio(j),unpause:new Audio(V)};S.menuHover.volume=.25;S.gameOver.volume=.425;const m=e=>{try{const n=S[e];n&&(n.currentTime=0,n.pause(),n.play())}catch(n){console.warn(n)}};function W(){const e=i("div",{className:"snake"});t.snake=e,t.playground.appendChild(e);const n=(d-1)/2;o.snakeCoordinates=[[3,n],[2,n],[1,n]],o.direction="down",N()}function L(){let[e,n]=o.snakeCoordinates[0];switch(o.direction){case"up":e--;break;case"down":e++;break;case"left":n--;break;case"right":n++;break}e=(e+d)%d,n=(n+d)%d,o.snakeCoordinates.unshift([e,n]),D()?(z(),X(),m("eat")):o.snakeCoordinates.pop(),N(),o.lastDirection=o.direction,$()&&ee()}function N(){t.snake.innerHTML="";for(const[e,n]of o.snakeCoordinates){const r=i("div");w(r,e,n),t.snake.appendChild(r)}}function x(e,n){return`Best ${e}: ${n}`}function h(e){const n=o.direction,{key:r,code:A}=e;if(A==="Space"&&o.gameStatus!==v.GAME_OVER){I();return}o.gameStatus===v.RUNNING&&((r==="ArrowUp"||r==="w")&&n!=="down"&&(o.direction="up"),(r==="ArrowDown"||r==="s")&&n!=="up"&&(o.direction="down"),(r==="ArrowLeft"||r==="a")&&n!=="right"&&(o.direction="left"),(r==="ArrowRight"||r==="d")&&n!=="left"&&(o.direction="right"))}function Y(){const e=i("div",{className:"score__current",text:"0"}),n=i("div",{className:"score__best",text:x(o.level,localStorage.getItem(o.level)||0)});t.currentScore=e,t.bestScore=n,t.scoreContainer.append(e,n)}function X(){if(t.currentScore){const e=o.snakeCoordinates.length-3;t.currentScore.textContent=e}}function _(e){t.bestScore&&(t.bestScore.textContent=x(o.level,e))}function O(){var e,n;(e=t.currentScore)==null||e.remove(),(n=t.bestScore)==null||n.remove(),t.currentScore=null,t.bestScore=null}function f(){var e,n;(e=t.snake)==null||e.classList.toggle("inactive"),(n=t.food)==null||n.classList.toggle("inactive")}function $(){const[e,...n]=o.snakeCoordinates;return n.some(r=>r[0]===e[0]&&r[1]===e[1])}function ee(){var A;clearInterval(o.moveInterval),document.removeEventListener("keydown",h),o.gameStatus=v.GAME_OVER;const e=parseInt(((A=t.currentScore)==null?void 0:A.textContent)||"0"),n=parseInt(localStorage.getItem(o.level))||0;t.gameOverOverlay=i("div",{className:"game-overlay",text:e>n?"Best Score!":"Game Over!"}),e>n?(localStorage.setItem(o.level,e),m("bestScore"),_(e)):m("gameOver"),t.playground.appendChild(t.gameOverOverlay);const r=()=>{var s,a;document.removeEventListener("click",r),document.removeEventListener("keydown",r),(s=t.snake)==null||s.remove(),t.snake=null,(a=t.food)==null||a.remove(),t.food=null,t.gameOverOverlay.remove(),t.gameOverOverlay=null,Z(),O(),k()};document.addEventListener("click",r),document.addEventListener("keydown",r)}function k(){const e=i("div",{className:"main-screen"}),n=i("img",{className:"main-screen__logo",attrs:{src:T}}),r=i("h1",{className:"main-screen__title",text:"Snake Game"}),A=i("h3",{className:"main-screen__descr",text:"Choose Level"}),a=["easy","medium","hard"].map(c=>i("button",{className:"button",text:c}));e.append(n,r,A,...a),t.playground.appendChild(e);let l=a[0];l.focus();const u=c=>{a.includes(c.target)?(l=c.target,l.focus(),m("menuHover")):(l==null||l.blur(),l=null)},q=c=>{const p=c.key==="ArrowLeft"||c.key==="Tab"&&c.shiftKey,R=c.key==="ArrowRight"||c.key==="Tab";!p&&!R||(c.preventDefault(),m("menuHover"),requestAnimationFrame(()=>{const M=a.indexOf(document.activeElement),b=p?(M-1+a.length)%a.length:(M+1)%a.length;l=a[b],l.focus()}))},g=c=>{if(!c.target.matches("button"))return;const p=c.target.textContent;document.removeEventListener("keydown",q),e.removeEventListener("mouseover",u),e.remove(),document.addEventListener("keydown",h),te(p)};document.addEventListener("keydown",q),e.addEventListener("mouseover",u),e.addEventListener("click",g)}function te(e){o.level=e,W(),z(),f(),Y(),ne()}function ne(){oe(re)}function oe(e){t.tutorialScreen=i("div",{className:"game-overlay"});const n=i("h2",{text:"Tutorial"}),r=i("p",{html:"Use <strong>\u2191\u2193\u2190\u2192</strong> or <strong>WASD</strong> to move the snake."}),A=i("p",{html:"Hit <strong>Space bar</strong> to pause the game."}),s=i("p",{text:"Press any key to continue"});t.tutorialScreen.appendChild(n),t.tutorialScreen.appendChild(r),t.tutorialScreen.appendChild(A),t.tutorialScreen.appendChild(s),t.playground.appendChild(t.tutorialScreen);const a=l=>{l.key&&(t.tutorialScreen.remove(),t.tutorialScreen.null,document.removeEventListener("keydown",a),e())};document.addEventListener("keydown",a)}function re(){const e=["3","2","1","GO!"];t.countdown=i("div",{className:"countdown"}),t.countdown.style.setProperty("--interval",`${700}ms`);const r=i("span",{className:"countdown__inner"});t.countdown.appendChild(r),t.playground.appendChild(t.countdown),e.forEach((A,s)=>{setTimeout(()=>{t.countdown.children[0].textContent=A,m(s<3?"preCount":"start")},700*s)}),setTimeout(()=>{t.countdown.remove(),t.countdown=null,se()},700*e.length)}function se(){o.gameStatus=v.RUNNING,f(),o.moveInterval=setInterval(()=>L(),E[o.level])}function I(){o.gameStatus===v.RUNNING?(o.gameStatus=v.PAUSED,clearInterval(o.moveInterval),f(),ae(),m("pause")):o.gameStatus===v.PAUSED&&(o.gameStatus=v.RUNNING,f(),y(),m("unpause"),o.moveInterval=setInterval(()=>L(),E[o.level]))}function ae(){if(t.pauseOverlay)return;const e=i("div",{className:"game-overlay"}),n=i("h2",{text:"Paused"}),r=i("button",{className:["button","button-resume"],text:"Resume",on:{click:()=>{y(),I()}}}),A=i("button",{className:["button","button-exit"],text:"Exit",on:{click:()=>{y(),ie()}}});e.append(n,r,A),t.playground.appendChild(e),t.pauseOverlay=e;const s=[r,A];let a=s[0];a.focus();const l=u=>{const q=u.key==="ArrowLeft"||u.key==="Tab"&&u.shiftKey,g=u.key==="ArrowRight"||u.key==="Tab";!q&&!g||(u.preventDefault(),m("menuHover"),requestAnimationFrame(()=>{const c=s.indexOf(document.activeElement),p=q?(c-1+s.length)%s.length:(c+1)%s.length;a=s[p],a.focus()}))};t.pauseOverlay.addEventListener("keydown",l)}function y(){var e;(e=t.pauseOverlay)==null||e.remove(),t.pauseOverlay=null}function ie(){var e,n;clearInterval(o.moveInterval),document.removeEventListener("keydown",h),(e=t.snake)==null||e.remove(),t.snake=null,(n=t.food)==null||n.remove(),t.food=null,Z(),O(),k()}P();k();
