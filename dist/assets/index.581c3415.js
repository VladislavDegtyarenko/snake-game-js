const K=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const u of s.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerpolicy&&(s.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?s.credentials="include":o.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}};K();var b="/snake-game-js/assets/snake.5576f49c.svg";console.log(b);let a=9,c,C=null,p=null,L=null,P={easy:400,medium:250,hard:125},y=!1,k=!1,l=null,i=null,S=null,h=!1;const T=new Audio("./pre-count.wav"),j=new Audio("./start.wav"),M=new Audio("./mixkit-quick-jump-arcade-game-239.wav"),R=new Audio("./mixkit-arcade-game-jump-coin-216.wav"),D=new Audio("./mixkit-arcade-retro-game-over-213.wav"),N=new Audio("./mixkit-arcade-magic-notification-2342.wav"),v=document.querySelector("#app");v.setAttribute("tabIndex",1);const m=document.createElement("div");m.classList.add("playground");m.style.setProperty("--playground-size",a);const E=document.createElement("div");E.classList.add("playground__grid");for(let e=0;e<a*a;e++){const t=document.createElement("div");E.appendChild(t)}const d=document.createElement("div");d.classList.add("score");v.appendChild(m);m.appendChild(d);m.appendChild(E);const $=()=>{const e=document.createElement("div"),t=document.createElement("div");e.classList.add("score__current"),t.classList.add("score__best"),e.textContent=0,t.textContent=`${p}: ${JSON.parse(localStorage.getItem(p))||0}`,d.appendChild(e),d.appendChild(t)},U=()=>{for(;d.firstChild;)d.removeChild(d.firstChild)},z=()=>{d.querySelector(".score__current").textContent=c.length-3},F=(e,t)=>{d.querySelector(".score__best").textContent=`${e}: ${t}`},_=()=>{const e=document.createElement("div"),t=document.createElement("img"),n=document.createElement("h1"),r=document.createElement("h3"),o=document.createElement("button"),s=document.createElement("button"),u=document.createElement("button");e.classList.add("main-screen"),t.classList.add("main-screen__logo"),n.classList.add("main-screen__title"),r.classList.add("main-screen__descr"),t.src=b,n.textContent="Snake Game",r.textContent="Choose Level",o.textContent="easy",s.textContent="medium",u.textContent="hard",e.appendChild(t),e.appendChild(n),e.appendChild(r),e.appendChild(o),e.appendChild(s),e.appendChild(u),m.appendChild(e),e.onmouseover=f=>{f.target.matches("button")&&g(M)},e.onclick=f=>{if(!f.target.matches("button"))return;const w=f.target.textContent;H(w),e.remove(),v.focus()}},J=()=>{const e=document.createElement("div"),t=document.createElement("button"),n=document.createElement("button"),r=document.createElement("button"),o=document.createElement("button");e.classList.add("controls"),t.textContent="\u25B2",n.textContent="\u25BC",r.textContent="\u25C0",o.textContent="\u25B6",t.style.gridColumnStart="2",r.style.gridColumnStart="1",o.style.gridColumnStart="3",n.style.gridColumnStart="2",e.appendChild(t),e.appendChild(r),e.appendChild(o),e.appendChild(n),v.appendChild(e),e.onclick=s=>{if(h||!y)return;const u=s.target===t,f=s.target===n,w=s.target===r,G=s.target===o;u&&i!=="down"&&(l="up"),f&&i!=="up"&&(l="down"),w&&i!=="right"&&(l="left"),G&&i!=="left"&&(l="right")}},H=e=>{Q(e),W(),B(),x(),$(),V()},Q=e=>{L=P[e],p=e},g=e=>{e.pause(),e.currentTime=0,e.play()},V=()=>{const e=["3","2","1","GO!"],n=document.createElement("div");n.classList.add("countdown"),m.appendChild(n),n.style.setProperty("--interval",750+"ms");for(let r=0;r<e.length;r++)setTimeout(()=>{n.textContent=e[r],r<e.length-1?g(T):g(j)},750*r);setTimeout(()=>{I(),n.remove()},750*e.length)};v.onkeydown=e=>{if(h||!y)return;const t=e.key==="ArrowUp"||e.key==="w",n=e.key==="ArrowDown"||e.key==="s",r=e.key==="ArrowLeft"||e.key==="a",o=e.key==="ArrowRight"||e.key==="d",s=e.code==="Space";t&&i!=="down"&&(l="up"),n&&i!=="up"&&(l="down"),r&&i!=="right"&&(l="left"),o&&i!=="left"&&(l="right"),s&&(k?I():O())};const W=()=>{const e=document.createElement("div");e.classList.add("snake"),m.appendChild(e),c=[[3,(a-1)/2],[2,(a-1)/2],[1,(a-1)/2]],l="down",q()},X=()=>{let[e,t]=c[0];if(l==="up"&&e--,l==="down"&&e++,l==="left"&&t--,l==="right"&&t++,e=e<0?a-1:e,t=t<0?a-1:t,e=e>a-1?0:e,t=t>a-1?0:t,c.unshift([e,t]),Z()?(B(),z(),g(R)):c.pop(),q(),i=l,h=ee(),h)return te()},q=()=>{const e=document.querySelector(".snake");for(;e.firstChild;)e.removeChild(e.firstChild);for(let t=0;t<c.length;t++){const n=document.createElement("div"),[r,o]=c[t];A(n,r,o),e.appendChild(n)}},I=()=>{k=!1,y=!0,x(),S=setInterval(X,L)},O=()=>{k=!0,clearInterval(S),S=null,x()},Y=()=>{let e=Math.floor(Math.random()*a),t=Math.floor(Math.random()*a);return[e,t]},A=(e,t,n)=>{e.style.setProperty("--top",t),e.style.setProperty("--left",n)},B=()=>{let e=document.querySelector(".food");document.querySelector(".food")===null&&(e=document.createElement("div"),e.classList.add("food"),document.querySelector(".playground").appendChild(e));do C=Y();while(c.some(r=>r.join()===C.join()));let[t,n]=C;A(e,t,n)},Z=()=>c[0].join()===C.join(),x=()=>{const e=document.querySelector(".snake"),t=document.querySelector(".food");e==null||e.classList.toggle("inactive"),t==null||t.classList.toggle("inactive")},ee=()=>{for(let e=1;e<c.length;e++)if(c[e].join()===c[0].join())return!0},te=()=>{O(),y=!1;const e=parseInt(document.querySelector(".score__current").textContent),t=JSON.parse(localStorage.getItem(p))||0,n=document.createElement("div");n.classList.add("game-over"),e>t?(g(N),F(p,e),localStorage.setItem(p,e),n.textContent="Best Score!"):(g(D),n.textContent="Game Over!"),document.querySelector(".playground").appendChild(n),n.onclick=()=>{document.querySelector(".snake").remove(),document.querySelector(".food").remove(),p=null,L=null,h=!1,U(),_(),n.remove()}},ne=()=>"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0;_();ne()&&J();
